<html>
  <head>
    <script
      type="text/javascript"
      src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"
    ></script>
  </head>

  <body>
    <cast-media-player></cast-media-player>
    <script>
      ;(function () {
        const context = cast.framework.CastReceiverContext.getInstance()
        let e2eSocket

        const CHANNEL = 'urn:x-cast:com.reactnative.googlecast.playground'

        context.addCustomMessageListener(CHANNEL, function (customEvent) {
          console.log(customEvent)

          context.sendCustomMessage(CHANNEL, customEvent.senderId, {
            message: `Current time: ${new Date().toDateString()}`,
          })
        })

        context.start()
      })()
    </script>
  </body>
</html>
